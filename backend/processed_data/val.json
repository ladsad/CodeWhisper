[
  {
    "language": "python",
    "file_path": "./scraped_data\\ArtResGAN_utils_dataset.py.txt",
    "name": "apply_random_damage",
    "code": "    def apply_random_damage(self, img):\n        \"\"\"Apply synthetic damage to artwork images.\"\"\"\n        img_np = np.array(img)\n        \n        # Choose random damage types\n        damage_types = random.sample([\n            'cracks', 'stains', 'scratches', 'fading', 'noise', 'missing_parts'\n        ], k=random.randint(1, 3))\n        \n        damaged_img = img_np.copy()\n        \n        for damage_type in damage_types:\n            if damage_type == 'cracks':\n                # Simulate cracks using random lines\n                for _ in range(random.randint(5, 20)):\n                    pt1 = (random.randint(0, img_np.shape[1]-1), random.randint(0, img_np.shape[0]-1))\n                    pt2 = (pt1[0] + random.randint(-100, 100), pt1[1] + random.randint(-100, 100))\n                    cv2.line(damaged_img, pt1, pt2, (0, 0, 0), random.randint(1, 3))\n                    \n            elif damage_type == 'stains':\n                # Simulate water stains or discoloration\n                mask = np.zeros_like(img_np)\n                for _ in range(random.randint(1, 5)):\n                    center = (random.randint(0, img_np.shape[1]-1), random.randint(0, img_np.shape[0]-1))\n                    radius = random.randint(20, 100)\n                    color = (random.randint(100, 200), random.randint(100, 200), random.randint(100, 200))\n                    cv2.circle(mask, center, radius, color, -1)\n                \n                # Blend the stain with the original image\n                alpha = random.uniform(0.2, 0.5)\n                damaged_img = cv2.addWeighted(damaged_img, 1-alpha, mask, alpha, 0)\n                \n            elif damage_type == 'scratches':\n                # Simulate scratches\n                for _ in range(random.randint(10, 30)):\n                    pt1 = (random.randint(0, img_np.shape[1]-1), random.randint(0, img_np.shape[0]-1))\n                    pt2 = (pt1[0] + random.randint(-50, 50), pt1[1] + random.randint(-50, 50))\n                    cv2.line(damaged_img, pt1, pt2, (255, 255, 255), 1)\n                    \n            elif damage_type == 'fading':\n                # Simulate color fading\n                hsv = cv2.cvtColor(damaged_img, cv2.COLOR_RGB2HSV)\n                hsv[:, :, 1] = hsv[:, :, 1] * random.uniform(0.3, 0.7)  # Reduce saturation\n                damaged_img = cv2.cvtColor(hsv, cv2.COLOR_HSV2RGB)\n                \n            elif damage_type == 'noise':\n                # Add noise\n                noise = np.random.normal(0, random.uniform(5, 20), damaged_img.shape).astype(np.uint8)\n                damaged_img = cv2.add(damaged_img, noise)\n                \n            elif damage_type == 'missing_parts':\n                # Simulate missing parts\n                for _ in range(random.randint(1, 5)):\n                    x = random.randint(0, img_np.shape[1]-50)\n                    y = random.randint(0, img_np.shape[0]-50)\n                    w = random.randint(10, 50)\n                    h = random.randint(10, 50)\n                    damaged_img[y:y+h, x:x+w] = (255, 255, 255)\n        \n        return Image.fromarray(damaged_img)",
    "docstring": "Apply synthetic damage to artwork images.",
    "metadata": "Repo: ladsad/ArtResGAN\nPath: utils/dataset.py\nLanguage: python"
  }
]